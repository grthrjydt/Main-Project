import{r,j as s,L as h}from"./index-GlDaeC7z.js";import{P as f}from"./PokemonCard-CwNGwp6K.js";import"./TypeBadge-Co_77fxk.js";const P=()=>{const[l,x]=r.useState([]),[n,m]=r.useState(!1),[d,u]=r.useState(null),[o,p]=r.useState("https://pokeapi.co/api/v2/pokemon?limit=24"),a=r.useRef(null),i=r.useCallback(async()=>{if(!(!o||n)){m(!0),u(null);try{const t=await(await fetch(o)).json();x(c=>[...c,...t.results]),p(t.next)}catch(e){u("Failed to fetch Pokémon."),console.error(e)}finally{m(!1)}}},[n,o]),g=r.useCallback(e=>{n||(a.current&&a.current.disconnect(),a.current=new IntersectionObserver(t=>{t[0].isIntersecting&&o&&i()}),e&&a.current.observe(e))},[n,o,i]);r.useEffect(()=>{i()},[]);const j=e=>{const t=e.split("/");return parseInt(t[t.length-2])};return s.jsxs("div",{children:[s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:l.map((e,t)=>{const c=j(e.url);return l.length===t+1?s.jsx("div",{ref:g,children:s.jsx(f,{pokemonId:c})},e.name):s.jsx(f,{pokemonId:c},e.name)})}),n&&s.jsx("div",{className:"flex justify-center my-8",children:s.jsx(h,{})}),d&&s.jsx("p",{className:"text-center text-red-500 my-8",children:d}),!o&&!n&&s.jsx("p",{className:"text-center text-gray-500 my-8",children:"모든 포켓몬을 확인했습니다!"})]})};export{P as default};
